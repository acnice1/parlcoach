:root{
  --ink:#0f172a; --ink-2:#334155; --bg:#0b1020; --card:#111927; --accent:#22d3ee; --muted:#94a3b8;
  --br:14px; --shadow:0 10px 30px rgba(0,0,0,.2);
}

*{box-sizing:border-box}
html,body{height:100%;margin:0}
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:#e2e8f0;background:var(--bg)}

.app-header{display:flex;align-items:center;gap:.6rem;padding:16px 20px;border-bottom:1px solid #1f2937;background:#0c1424;position:sticky;top:0;z-index:2}
.app-header h1{margin:0;font-size:20px;letter-spacing:.2px}
.tag{padding:2px 8px;border-radius:999px;background:#0b556a;color:#a9f7ff;font-size:12px}

.tabs{display:flex;gap:8px;padding:10px 12px;background:#0c1424;position:sticky;top:58px;z-index:1;border-bottom:1px solid #1f2937}
.tabs button{appearance:none;border:1px solid #1f2937;background:#101827;color:#d1d5db;padding:8px 14px;border-radius:999px;cursor:pointer}
.tabs button.active{background:#123146;border-color:#18465a;color:#8df2ff}

.view{max-width:980px;margin:16px auto;padding:0 12px}

.panel{background:var(--card);border:1px solid #1f2937;border-radius:var(--br);box-shadow:var(--shadow);padding:16px}
.panel-head{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:8px}
.panel h2{margin:0;font-size:18px}
.actions{display:flex;gap:8px}
.fixed-input{width:180px}

.add-row{display:grid;grid-template-columns:1fr 1fr auto;gap:8px;margin:12px 0}
.add-row input{padding:10px;border:1px solid #243041;background:#0f172a;color:#e2e8f0;border-radius:10px}
.add-row button{padding:10px 14px;border:1px solid #1f2937;background:#162033;color:#e2e8f0;border-radius:10px;cursor:pointer}

.card{padding:16px;border:1px solid #243041;border-radius:12px;background:#0e1726}
.card .front{font-size:18px;margin-bottom:10px}
.card .back{font-size:17px;opacity:.95;margin-bottom:10px}
.card-actions{display:flex;gap:8px;margin-bottom:6px}
.card-actions button{padding:8px 10px;border:1px solid #1f2937;background:#162033;color:#e2e8f0;border-radius:10px;cursor:pointer}
.meta{color:var(--muted);font-size:12px}

.list summary{cursor:pointer;margin-top:8px}
.list-row{display:grid;grid-template-columns:1fr auto 1fr auto auto;gap:8px;padding:6px 0;border-bottom:1px dashed #1f2937;align-items:center}
.list-row .front,.list-row .back{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.list-row .sep{color:#648}
.list-row .small{padding:6px 10px;border:1px solid #1f2937;background:#162033;color:#e2e8f0;border-radius:10px;cursor:pointer}

.empty{color:#a1a1aa;margin:8px 0}

.qa{display:grid;grid-template-columns:1fr;gap:8px;margin:8px 0}
.qa input,.qa textarea{padding:10px;border:1px solid #243041;background:#0f172a;color:#e2e8f0;border-radius:10px}
.qa textarea{min-height:90px}
.qa button{justify-self:start;padding:8px 12px;border:1px solid #1f2937;background:#162033;color:#e2e8f0;border-radius:10px;cursor:pointer}

.recording{padding:10px;border:1px solid #243041;border-radius:10px;margin:8px 0;background:#0e1726}
.rec-meta{display:flex;gap:8px;align-items:center;margin:6px 0}
.rec-actions{display:flex;gap:12px}
.rec-actions .danger{border-color:#3b1f28;background:#2a0e14}

*{box-sizing:border-box}
html,body{height:100%;margin:0}
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:#e2e8f0;background:var(--bg)}

.app-header{display:flex;align-items:center;gap:.6rem;padding:16px 20px;border-bottom:1px solid #1f2937;background:#0c1424;position:sticky;top:0;z-index:2}
.app-header h1{margin:0;font-size:20px;letter-spacing:.2px}
.tag{padding:2px 8px;border-radius:999px;background:#0b556a;color:#a9f7ff;font-size:12px}

.tabs{display:flex;gap:8px;padding:10px 12px;background:#0c1424;position:sticky;top:58px;z-index:1;border-bottom:1px solid #1f2937}
.tabs button{appearance:none;border:1px solid #1f2937;background:#101827;color:#d1d5db;padding:8px 14px;border-radius:999px;cursor:pointer}
.tabs button.active{background:#123146;border-color:#18465a;color:#8df2ff}

.view{max-width:980px;margin:16px auto;padding:0 12px}

.panel{background:var(--card);border:1px solid #1f2937;border-radius:var(--br);box-shadow:var(--shadow);padding:16px}
.panel-head{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:8px}
.panel h2{margin:0;font-size:18px}
.actions{display:flex;gap:8px}
.fixed-input{width:180px}

.subtabs{display:flex;gap:8px;margin:8px 0 12px}
.subtabs button{appearance:none;border:1px solid #1f2937;background:#101827;color:#d1d5db;padding:6px 12px;border-radius:10px;cursor:pointer}
.subtabs button.active{background:#17263a;border-color:#1f3a52;color:#9beaff}

.add-row{display:grid;grid-template-columns:1fr 1fr auto;gap:8px;margin:12px 0}
.add-row input{padding:10px;border:1px solid #243041;background:#0f172a;color:#e2e8f0;border-radius:10px}
.add-row button{padding:10px 14px;border:1px solid #1f2937;background:#162033;color:#e2e8f0;border-radius:10px;cursor:pointer}

.card{padding:16px;border:1px solid #243041;border-radius:12px;background:#0e1726}
.card .front{font-size:18px;margin-bottom:10px}
.card .back{font-size:17px;opacity:.95;margin-bottom:10px}
.card-actions{display:flex;gap:8px;margin-bottom:6px;align-items:center;flex-wrap:wrap}
.card-actions button{padding:8px 10px;border:1px solid #1f2937;background:#162033;color:#e2e8f0;border-radius:10px;cursor:pointer}
.card-actions .answer{padding:6px 10px;border-radius:8px;background:#17263a;border:1px solid #1f2937}
.meta{color:var(--muted);font-size:12px}

.list summary{cursor:pointer;margin-top:8px}
.list-row{display:grid;grid-template-columns:1fr auto 1fr auto auto;gap:8px;padding:6px 0;border-bottom:1px dashed #1f2937;align-items:center}
.list-row .front,.list-row .back{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.list-row .sep{color:#648}
.list-row .small{padding:6px 10px;border:1px solid #1f2937;background:#162033;color:#e2e8f0;border-radius:10px;cursor:pointer}

.empty{color:#a1a1aa;margin:8px 0}

.qa{display:grid;grid-template-columns:1fr;gap:8px;margin:8px 0}
.qa input,.qa textarea{padding:10px;border:1px solid #243041;background:#0f172a;color:#e2e8f0;border-radius:10px}
.qa textarea{min-height:90px}
.qa button{justify-self:start;padding:8px 12px;border:1px solid #1f2937;background:#162033;color:#e2e8f0;border-radius:10px;cursor:pointer}

.recording{padding:10px;border:1px solid #243041;border-radius:10px;margin:8px 0;background:#0e1726}
.rec-meta{display:flex;gap:8px;align-items:center;margin:6px 0}
.rec-actions{display:flex;gap:12px}
.rec-actions .danger{border-color:#3b1f28;background:#2a0e14}

.set-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px}
.set-grid button{padding:8px 12px;border:1px solid #1f2937;background:#162033;color:#e2e8f0;border-radius:10px;cursor:pointer}

.plan-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:8px;margin:8px 0}
.plan-grid input, .plan-grid select{width:100%;padding:10px;border:1px solid #243041;background:#0f172a;color:#e2e8f0;border-radius:10px}
.plan-text{width:100%;min-height:130px;padding:10px;border:1px solid #243041;background:#0f172a;color:#e2e8f0;border-radius:10px}

.dim{color:#9ca3af}

/* Verbs */
.verbs .box{padding:12px;border:1px solid #243041;border-radius:12px;background:#0e1726;margin:10px 0}
.verbs .row{display:flex;gap:10px;align-items:center;margin:6px 0}
.verbs-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:12px}
.verbs textarea, .verbs input{width:100%;padding:10px;border:1px solid #243041;background:#0f172a;color:#e2e8f0;border-radius:10px}
.drill-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:10px}
.drill-grid select, .drill-grid input{width:100%;padding:10px;border:1px solid #243041;background:#0f172a;color:#e2e8f0;border-radius:10px}
.drill-side{font-size:18px;margin-bottom:10px}


.recording{padding:10px;border:1px solid #243041;border-radius:10px;margin:8px 0;background:#0e1726}
.rec-meta{display:flex;gap:8px;align-items:center;margin:6px 0}
.rec-actions{display:flex;gap:12px}
.rec-actions .danger{border-color:#3b1f28;background:#2a0e14}

.set-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:12px}
.set-grid button{padding:8px 12px;border:1px solid #1f2937;background:#162033;color:#e2e8f0;border-radius:10px;cursor:pointer}

.plan-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:8px;margin:8px 0}
.plan-grid input, .plan-grid select{width:100%;padding:10px;border:1px solid #243041;background:#0f172a;color:#e2e8f0;border-radius:10px}
.plan-text{width:100%;min-height:130px;padding:10px;border:1px solid #243041;background:#0f172a;color:#e2e8f0;border-radius:10px}

.dim{color:#9ca3af}

/* Drill card layout & interactions */
.drill-card { position: relative; padding: 1.25rem 1.5rem; }
.drill-card .pill {
  position: absolute; top: .75rem; right: .75rem;
  font-size: .8rem; padding: .25rem .5rem; border-radius: 999px;
  background: rgba(0,0,0,.06); color: #334155;
  pointer-events: none;          /* <-- wonâ€™t steal clicks */
}
.drill-input {
  position: relative; z-index: 1;/* <-- ensure on top */
  width: 100%; font-size: 1.15rem;
  padding: .75rem 1rem; border-radius: .75rem;
  border: 1px solid #e2e8f0; outline: none;
}
.drill-input:focus { border-color:#94a3b8; box-shadow: 0 0 0 3px rgba(148,163,184,.25); }
.drill-card .controls { display:flex; gap:.5rem; justify-content:center; margin:.75rem 0; }
.drill-card .feedback { text-align:center; margin:.25rem 0; }
.drill-card .feedback.wrong { color:#b91c1c; }
/* --- JSON modal --- */
.modal-overlay{
  position:fixed; inset:0; background:rgba(2,6,23,.6); backdrop-filter:saturate(90%) blur(2px);
  display:flex; align-items:center; justify-content:center; z-index:9999;
}
.modal{
  width:min(920px, 92vw); max-height:86vh; overflow:auto;
  background:#0e1726; border:1px solid #243041; border-radius:14px; box-shadow:var(--shadow);
  padding:16px;
}
.modal-head{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:8px }
.modal-row{ display:flex; gap:8px; align-items:center; margin:8px 0 }
.modal-row .grow{ flex:1 }
.json-area{
  width:100%; min-height:360px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
  padding:10px; border:1px solid #243041; border-radius:10px; background:#0f172a; color:#e2e8f0;
}
.modal-actions{ display:flex; gap:8px; align-items:center; margin-top:10px }
.modal-actions .danger{ border-color:#3b1f28; background:#2a0e14 }
.modal .err{ color:#fca5a5 }

/* === Rule Help Styling === */
.rule-help {
  background: #fffef8; /* warm off-white for contrast */
  border: 2px solid #f5d26b; /* soft golden accent */
  border-left: 6px solid #e6b400; /* thicker accent bar */
  border-radius: 12px;
  padding: 12px 16px;
  margin-top: 10px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
  font-size: 0.95rem;
  color: #333;
}

.rule-help h4 {
  margin: 0 0 6px;
  font-size: 1rem;
  font-weight: 600;
  color: #b58900; /* dark amber tone */
}

.rule-help ul {
  list-style-type: disc;
  margin: 0;
  padding-left: 20px;
}

.rule-help li {
  margin-bottom: 3px;
  line-height: 1.4;
}

.rule-help li::marker {
  color: #e6b400; /* accent the bullets */
}

/* === Unified Button Styles === */
button,
.save-btn,
.save-settings-btn {
  font-family: inherit;
  font-size: 1rem;
  font-weight: 600;
  border-radius: 10px;
  padding: 10px 20px;
  border: none;
  cursor: pointer;
  transition: all 0.25s ease;
}

/* --- Primary action buttons (Start, Save, Save Settings) --- */
.start-drills-btn,
.save-btn,
.save-settings-btn {
  background: linear-gradient(135deg, #2563eb, #3b82f6);
  color: #fff;
  box-shadow: 0 3px 10px rgba(59, 130, 246, 0.25);
  margin-top: 12px;
  display: inline-block;
}

.start-drills-btn:hover,
.save-btn:hover,
.save-settings-btn:hover {
  background: linear-gradient(135deg, #1d4ed8, #2563eb);
  box-shadow: 0 5px 14px rgba(59, 130, 246, 0.35);
  transform: translateY(-1px);
}

.start-drills-btn:active,
.save-btn:active,
.save-settings-btn:active {
  transform: translateY(0);
  box-shadow: 0 2px 6px rgba(59, 130, 246, 0.3);
}

/* --- Layout alignment --- */
.button-group {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
  margin-top: 16px;
}
/* === Drill Score Styling === */
.score-display {
  font-size: 1.3rem;
  font-weight: 700;
  padding: 6px 14px;
  border-radius: 10px;
  display: inline-block;
  margin-top: 10px;
  text-align: right;
  float: right; /* aligns to right edge */
  letter-spacing: 0.3px;
  transition: all 0.25s ease;
}

/* Default look */
.score-display.default {
  background: #eef2ff;
  color: #1e3a8a;
  box-shadow: 0 2px 6px rgba(79, 70, 229, 0.1);
}

/* Dynamic states */
.score-display.good {
  background: #dcfce7;
  color: #166534;
  box-shadow: 0 2px 6px rgba(22, 101, 52, 0.1);
}

.score-display.ok {
  background: #fef9c3;
  color: #854d0e;
  box-shadow: 0 2px 6px rgba(133, 77, 14, 0.1);
}

.score-display.bad {
  background: #fee2e2;
  color: #991b1b;
  box-shadow: 0 2px 6px rgba(153, 27, 27, 0.1);
}

.score-display:hover {
  transform: scale(1.03);
}
.rule-help { background:#f6f8fb; border:1px solid #e5e7eb; border-radius:10px; padding:10px 12px; }
.rule-help li {
  line-height: 1.45;
}
.rule-help li:first-child {
  margin-top: 2px;
}
.rule-help li::first-line {
  font-weight: 500;
}
/* === Wrong Answer Feedback === */
.feedback.wrong {
  font-size: 1.25rem;        /* make it bigger */
  font-weight: 600;
  color: #b91c1c;            /* deep red for visibility */
  background: #fee2e2;       /* light red background */
  border: 2px solid #fecaca; /* soft red border */
  border-radius: 10px;
  padding: 10px 14px;
  margin-top: 12px;
  line-height: 1.4;
  box-shadow: 0 2px 6px rgba(185, 28, 28, 0.1);
}

.feedback.wrong strong {
  font-size: 1.4rem;         /* even bigger for the expected answer */
  color: #7f1d1d;            /* darker red for emphasis */
}
.toggle-translate {
  margin: 8px 0;
  font-size: 0.9em;
}
.toggle-translate label {
  cursor: pointer;
  user-select: none;
}
/* --- Modern switch for "Show Verb Translation" --- */
.form-switch {
  margin: 8px 0;
  display: inline-block;
}

.switch {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  cursor: pointer;
  user-select: none;
  font-size: 0.95rem;
  line-height: 1.2;
}

.switch input {
  position: absolute;
  opacity: 0;
  width: 1px;
  height: 1px;
  pointer-events: none;
}

.switch .slider {
  --h: 22px;
  --w: 42px;
  --track: color-mix(in srgb, currentColor 12%, transparent);
  --track-on: color-mix(in srgb, #4ade80 80%, transparent);
  --knob: #fff;
  position: relative;
  width: var(--w);
  height: var(--h);
  border-radius: var(--h);
  background: var(--track);
  transition: background 160ms ease;
  box-shadow: inset 0 0 0 1px color-mix(in srgb, currentColor 25%, transparent);
}

.switch .slider::after {
  content: "";
  position: absolute;
  top: 2px;
  left: 2px;
  width: calc(var(--h) - 4px);
  height: calc(var(--h) - 4px);
  border-radius: 50%;
  background: var(--knob);
  box-shadow: 0 1px 2px rgba(0,0,0,.25);
  transition: transform 160ms ease;
}

.switch input:checked + .slider {
  background: var(--track-on);
}
.switch input:checked + .slider::after {
  transform: translateX(calc(var(--w) - var(--h)));
}

/* Focus outline for accessibility */
.switch input:focus-visible + .slider {
  outline: 2px solid color-mix(in srgb, currentColor 50%, transparent);
  outline-offset: 2px;
}

.switch .label-text {
  opacity: 0.9;
}

/* === Prompt Label Styling === */
.label {
  display: inline-block;
  font-size: 1.2rem;              /* large and readable */
  font-weight: 500;               /* bold for emphasis */
  color: #0f172a;                 /* dark navy (good contrast on light backgrounds) */
  background: #e0f2fe;            /* soft blue highlight */
  border-left: 5px solid #2563eb; /* GC-blue accent */
  padding: 0.4rem 1.2rem; /* spacious padding */
  border-radius: 8px; /* rounded corners */
  margin: 1rem 0;
  text-align: center;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.label:hover {
  transform: scale(1.03);
  box-shadow: 0 4px 10px rgba(0,0,0,0.15);
}

.accent-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 0.4rem;
  margin-top: 0.6rem;
  justify-content: center;
}

.accent-btn {
  background: #1e3a8a;
  color: #fff;
  border: none;
  border-radius: 6px;
  padding: 0.3rem 0.6rem;
  font-size: 1rem;
  cursor: pointer;
  transition: background 0.2s, transform 0.1s;
}

.accent-btn:hover {
  background: #2563eb;
  transform: scale(1.1);
}

.accent-btn:active {
  background: #1e40af;
}
/* Collapsible box header */
details.box > summary {
  list-style: none;
  cursor: pointer;
  margin: -4px 0 8px;
}
details.box > summary::-webkit-details-marker { display:none; }
details.box[open] > summary h3::after,
details.box > summary h3::after {
  content: 'â–¾';
  margin-left: .4rem;
  font-weight: 400;
  opacity: .7;
}
details.box[open] > summary h3::after { content: 'â–´'; }
